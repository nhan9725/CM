---
- name: install software properties common
  become: true    
  apt: 
    name: software-properties-common
    state: present

- name: Add repository for Ubuntu
  become: true
  apt_repository: repo={{ php_ppa }}

- name: Update apt
  become: yes
  apt: update_cache=yes

- name: Install PHP Packages
  become: yes
  apt: 
    name: "{{ php_packages }}"
    state: present
  with_items: "{{ php_packages }}"
  when: php_packages is defined
  notify:
    - restart php-fpm

# - include: configure.yml
#   static: no
- include: configure-apcu.yml
  static: no
# - include: configure-opcache.yml
#   static: no
# - include: configure-fpm.yml
#   static: no
